"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["loader.Typeahead"],{62589:(e,t,s)=>{s.r(t),s.d(t,{GenericTypeaheadComposeWrapper:()=>x,default:()=>v});var o=s(2784),i=s(28316),r=s(25686),n=s(73186),a=s(41425),l=s(35030),d=s(70451),c=s(16587),h=s(70969),p=s(95254),m=s(88027),u=s(32941),y=s(60673);const g=[m.my.Users],w=[m.my.Topics],_=50*n.Z.theme.scaleMultipler,b=30*n.Z.theme.scaleMultipler;let f=0;class x extends o.Component{constructor(e,t){super(e,t),this._typeaheadActive=!1,this._renderTypeaheadDropdown=e=>{const{composeCommunityId:t,contextText:s,isInlineReply:i,onSelectItem:n,source:l}=this.props,{isModal:d}=this.context,c=e.resultType===m.my.Topics?"hashtag":void 0,p=t?m._4.CommunityHashtagsSuggested:l||m._4.Compose,u=o.createElement(h.Z,{ariaDescendantId:this.state.ariaDescendantId,communityId:t,contextText:s,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:n,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:p,style:this._calcStyle(),topicType:c,withItemAlwaysSelected:!0});return d||i?o.createElement(a.Z.HalfSheet,null,o.createElement(o.Fragment,null,o.createElement(r.Z,{onClick:this._handleDismiss,style:I.mask}),u)):o.createElement(o.Fragment,null,o.createElement(r.Z,{onClick:this._handleDismiss,style:I.mask}),u)},this.render=()=>{const{children:e,query:t}=this.props,s=o.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=i.findDOMNode(t),this._textInputRef=t;const{ref:s}=e;s&&s(t)}});return o.createElement(r.Z,{style:I.inputContainer},o.createElement(l.Z,{onKeyDown:this._handleKeyDown},s,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))},this._getFilter=e=>"users"===e?g:w,this._calcStyle=()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:s,source:o}=this.props,i=this._textInputNode,r=window.innerHeight,n=window.innerWidth,a=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(i instanceof window.HTMLElement){if(o===m._4.LongformComposer){const e=this._getWindowSelectionY()||this._windowSelectionY;return e?[this._getLongformDropdownPositioningStyle(r,n,e,60,70),I.dropdownStyle]:void 0}if(e||t){const t=i.getBoundingClientRect();return[this._getDropdownPositioningStyle(r,n,t.top,t.top+a,t.left,e,!!s),I.dropdownStyle]}return[this._getModalFullViewportStyle(a),I.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(a,n,0,0,0,e,!!s),I.dropdownStyle]},this._handleKeyDown=e=>{const{selectedItem:t}=this.state,{onSelectItem:s,query:o}=this.props,{key:i}=e;u.kE(e)&&o&&("ArrowDown"===i?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===i?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===i||"Tab"===i?t&&(s(t),e.preventDefault()):"Escape"===i&&(this._handleDismiss(),e.preventDefault()))},this._handleItemFocusChanged=e=>this.setState({ariaDescendantId:u.A1(),selectedItem:e}),this._handleTypeaheadRef=e=>{this._typeaheadRef=e},this._handleDismiss=()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()},this._getDropdownHeight=(0,c.Z)(((e,t)=>{const s=50*e/100;return s>t?t:s})),this._getModalOrInlineReplyDropdownStyles=(0,c.Z)(((e,t,s)=>e?{bottom:`${s}px`}:{top:`${t}px`})),this._getWindowSelectionY=()=>{var e;const t=window.getSelection().rangeCount>0?Array.from(window.getSelection().getRangeAt(0).getClientRects()):[];return null==t||null==(e=t[0])?void 0:e.y},this._getLongformDropdownPositioningStyle=(0,c.Z)(((e,t,s,o,i)=>{const{maxWidth:r,minWidth:n}=this._getDropdownMinMaxWidth(t,i),a=s>(e-o)/2+o,l=this._getDropdownHeight(e,(e-3*o)/2);return{height:`${l}px`,maxWidth:`${r}px`,minWidth:`${n}px`,position:"fixed",top:`${a?s-b-l:s+_}px`}})),this._getDropdownPositioningStyle=(0,c.Z)(((e,t,s=0,o=0,i=0,r=!1,n=!1)=>{const{maxWidth:a,minWidth:l}=this._getDropdownMinMaxWidth(t,i),d=e-o,c=s,h=d/e<.5&&c>d,p={maxWidth:`${a}px`,minWidth:`${l}px`,maxHeight:`${h?this._getDropdownHeight(e,c-10):this._getDropdownHeight(e,d-10)}px`};return r||n?{...p,position:"fixed",start:`${i}px`,...this._getModalOrInlineReplyDropdownStyles(h,o,e-s)}:h?{...p,bottom:"100%",position:"absolute"}:{...p,top:"100%",position:"absolute"}})),this._getDropdownMinMaxWidth=(e,t)=>{const s=e-t-10;return{maxWidth:s,minWidth:Math.min(s,300)}},this._getModalFullViewportStyle=(0,c.Z)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"}))),this.state={ariaDescendantId:u.A1()},this._dropdownDomId=`typeaheadDropdownWrapped-${f}`,f+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,s=!(!this._textInputNode||!t);if(s!==this._typeaheadActive){this._typeaheadActive=s,e&&e(s);const t=this._getWindowSelectionY();t&&t!==this._windowSelectionY&&(this._windowSelectionY=t)}}resetSelectedItem(){this.setState({selectedItem:void 0})}}x.contextType=d.Z,x.defaultProps={source:m._4.Compose};const I=n.Z.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{...n.Z.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,end:0,start:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:p.po}}))),v=(0,y.Z)(x,{component:"compose"})},98330:(e,t,s)=>{s.r(t),s.d(t,{UserPicker:()=>w,default:()=>I,finalGetItemIsDisabled:()=>b,getFinalItemDisabledMessage:()=>f});var o=s(2784),i=s(25686),r=s(92471),n=s(34740),a=s(73186),l=s(79404),d=s.n(l),c=s(74383),h=s(90581),p=s(88027);const m="searchPeople",u=[p.my.Users],y=d().fc9dd578,g=d().gdb7bc25;class w extends o.Component{constructor(e,t){super(e,t),this._renderSelectedUsersList=()=>{const{selectedUsers:e}=this.props;return o.createElement(i.Z,{style:x.selectedUsersList},e.map(this._renderSelectedUserPill))},this._renderSelectedUserPill=e=>{const{withCompactPills:t}=this.props,s=this.props.onRemove.bind(this,e),i=e.type===p.El.User?o.createElement(r.default,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return o.createElement(n.Z,{accessibilityLabel:g({name:e.data.name}),avatar:i,compact:t,key:e.id,mode:"remove",onClick:s,style:x.selectionPill,text:e.data.name})},this._getItemIsDisabled=e=>{const{getItemIsDisabled:t,preselectedUsers:s}=this.props;return b(e,t,s)},this._getItemDisabledMessage=e=>{const{getItemDisabledMessage:t,preselectedUsers:s}=this.props;return f(e,t,s)},this._handleQueryChange=e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)},this._handleOnSelect=e=>{const{onSelect:t}=this.props;t&&t(e)},this.state={query:""}}render(){const{injections:e,preselectedUsers:t,renderCallout:s,renderHeader:r,selectedUsers:n,shouldAutoFocus:a,source:l}=this.props,d=n.map((({id:e})=>e)).concat(t);return o.createElement(i.Z,{style:x.root},o.createElement(c.default,{alwaysOpen:!0,disableClearButton:!0,filter:u,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:y,renderCallout:s,renderHeader:r,renderInSearchField:n.length?this._renderSelectedUsersList:void 0,renderUserDecoration:h.ib,selectedItems:d,shouldAutoFocus:a,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:l,testID:m,withSectionDivider:!1}))}}w.defaultProps={preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1};const _=(e,t)=>t.indexOf(e)>=0,b=(e,t,s)=>_(e.id,s)||!(!t||!t(e)),f=(e,t,s)=>{if(!_(e.id,s)&&t)return t(e)},x=a.Z.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}}))),I=w},34740:(e,t,s)=>{s.d(t,{Z:()=>_});s(6886);var o=s(2784),i=s(25686),r=s(79404),n=s.n(r),a=s(18958),l=s(45784),d=s(7066),c=s(36934),h=s(79866),p=s(11839),m=s(73186),u=s(14522);const y={active:n().e557ad8e,expand:n().e3a58c28,remove:n().h517e8d8};class g extends o.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:s,disabled:r,link:n,mode:a,onClick:l,secondaryAction:d,selected:u,style:g,text:_}=this.props,b=this._renderIcon(!0,a),f=d&&this._renderIcon(!1,d.mode),x=[w.root,s&&w.compact,r&&w.disabled,u&&w.selected,g],I=[w.content,!!b&&w.withIcon,!!t&&(s&&w.withAvatarImageCompact||w.withAvatarImage)],v=h.Z.generate({backgroundColor:u?m.Z.theme.colors.primary:"transparent",color:u?m.Z.theme.colors.white:m.Z.theme.colors.primary});return o.createElement(i.Z,{style:x},o.createElement(p.Z,{accessibilityLabel:e||(a?y[a]:""),disabled:r,interactiveStyles:v,link:n,onPress:l,style:I},this._renderAvatar(),o.createElement(c.ZP,{color:u?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:w.text,weight:"bold"},_),b),d?o.createElement(p.Z,{accessibilityLabel:d.accessibilityLabel||(d.mode?y[d.mode]:""),disabled:r||d.disabled,hoverLabel:{label:d.hoverLabel||(d.mode?y[d.mode]:"")},interactiveStyles:v,onPress:this._handleSecondaryClick,style:w.secondaryControl},o.createElement(i.Z,{style:w.secondaryBorder},f)):null)}_renderIcon(e=!0,t){const{selected:s}=this.props,i=[w.icon,s&&w.iconSelected],r=[w.icon];switch(t){case u.D.Remove:return o.createElement(a.Z,{style:[w.dismissIcon,e&&i]});case u.D.Expand:return o.createElement(l.Z,{style:e?i:r});case u.D.Active:return o.createElement(d.Z,{style:i});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?o.createElement(i.Z,{style:[w.avatarContainer,t?w.avatarCompact:w.avatar]},e):null}}g.defaultProps={compact:!1,disabled:!1,selected:!1};const w=m.Z.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginEnd:e.spaces.space8},withAvatarImage:{paddingStart:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingStart:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginStart:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingEnd:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderStartColor:e.colors.borderColor,borderStartWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}}))),_=g},14522:(e,t,s)=>{s.d(t,{D:()=>o});const o=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},45784:(e,t,s)=>{s.d(t,{Z:()=>a});var o=s(2784),i=s(90601),r=s(73569);const n=(e={})=>(0,i.Z)("svg",{...e,accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.Z.root,e.style],viewBox:"0 0 24 24",children:o.createElement("g",null,o.createElement("path",{d:"M11 11V4h2v7h7v2h-7v7h-2v-7H4v-2h7z"}))});n.metadata={width:24,height:24};const a=n},72192:(e,t,s)=>{s.d(t,{Z:()=>o});s(36728);const o=(e,t)=>e.reduce(((s,o,i)=>{const r=t?t(o,i,e):!!o;return r&&s[0].push(o),!r&&s[1].push(o),s}),[[],[]])}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.95d66059.js.map