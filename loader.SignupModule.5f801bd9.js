"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["loader.SignupModule"],{84361:(e,t,n)=>{n.d(t,{Z:()=>E});n(6886),n(36728);var s=n(2784),i=n(29496),o=n(79404),a=n.n(o),r=n(446),l=n(63752),c=n(57604),p=n(42536),u=n(55258),d=n(87053),h=n(76687),m=n(20032),g=n(40611),_=n(78956),b=n(85114);const y=a().ib65b1c6,w=a().f55cebb8,S=a().dcc304d6,f=a().g61ed8a4,Z={clientId:b.fp,scope:"name email",usePopup:!0};class C extends s.PureComponent{constructor(...e){super(...e),this.state={isScriptLoaded:!1},this._is3rdPartyIntegrationDisabled=(0,c.L)("responsive_web_3rd_party_category_sign_in_with_apple",this.context.featureSwitches),this._isSSORedirectEnabled=this.context.featureSwitches.isTrue("responsive_web_sso_redirect_enabled")||this.context.featureSwitches.isTrue("responsive_web_repeat_profile_visits_notifications_device_follow_only_version_enabled")||this.context.featureSwitches.isTrue("responsive_web_repeat_profile_visits_notifications_enabled"),this._getButtonLabel=()=>{const{buttonState:e}=this.props;switch(e){case u.yX.LogIn:return w;case u.yX.ContinueWith:return S;default:return y}},this._initAppleIDAuth=()=>{const{AppleID:e}=window,{fetchSsoInitToken:t}=this.props,n=(0,p.NB)(this.context.featureSwitches)?`https://${p.EM}`:`https://${p.it}`;e&&t(l.Bm.Apple).then((({state:t})=>{e.auth.init({...Z,redirectURI:n,state:t})}))},this._handleOnPress=()=>{const{AppleID:e}=window,{analytics:t,buttonState:n,history:s,loginReturnPath:i,personalizationSettings:o,shouldPropagateP13nSettings:a,ssoInitTokens:r}=this.props,{allowCookieUse:c,allowDeviceAccess:p,allowPartnerships:u,allowPersonalization:d}=o||{};t.scribe({component:"apple_sign_in",element:n,action:"click"}),e.auth.signIn().then((e=>{t.scribe({component:"apple_sign_in",element:n,action:"success"});const o=e.user&&e.user.name&&e.user.name.firstName&&e.user.name.lastName;s.push({pathname:"/i/flow/single_sign_on",state:{input:{cookie_personalization_settings:a&&{allow_cookie_use:!!c,allow_device_personalization:!!p,allow_partnerships:!!u,allow_ads_personalization:!!d},requested_variant:JSON.stringify({display_name:o&&`${e.user.name.firstName} ${e.user.name.lastName}`,id_token:e.authorization.id_token,provider:l.Bm.Apple,state:r[l.Bm.Apple],redirect_uri:this._isSSORedirectEnabled?i:void 0})}}})})).catch((e=>{const{addToast:s}=this.props,{error:i}=e;i!==b.IN?(t.scribe({component:"apple_sign_in",element:n,action:"failure"}),s({text:f})):t.scribe({component:"apple_sign_in",element:"auth",action:"user_closed_popup"})}))}}componentDidMount(){this._is3rdPartyIntegrationDisabled||d.Z.inject({callback:()=>{this._initAppleIDAuth(),this.setState({isScriptLoaded:!0})},scriptId:"signInWithAppleJsLibrary",src:"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"})}render(){const{buttonSize:e,style:t}=this.props,{isScriptLoaded:n}=this.state,o=this._getButtonLabel();return this._is3rdPartyIntegrationDisabled?null:s.createElement(i.ZP,{backgroundColor:"white",borderColor:"gray200",children:o,color:"alwaysBaseGray1100",disabled:!n,icon:s.createElement(r.Z,null),onPress:this._handleOnPress,size:e,style:t,testID:_.Z.apple})}}C.contextType=m.rC,C.defaultProps={buttonSize:"xLarge",buttonState:"signup"};const E=(0,h.ZP)((0,g.Z)(C))},8419:(e,t,n)=>{n.r(t),n.d(t,{SignupModuleContainer:()=>E,default:()=>k});n(6886);var s=n(2784),i=n(25686),o=n(73186),a=n(68591),r=n(36934),l=n(54044),c=n(29496),p=n(79404),u=n.n(p),d=n(20032),h=n(84361),m=n(58721),g=n(85114),_=n(52008),b=n(55258);const y=u().a565833e,w=u().b50ea616,S=u().ie8e1ffc,f=o.Z.create((e=>({buttonContainer:{marginTop:e.spaces.space16,marginBottom:e.spaces.space16,marginStart:e.spaces.space12,marginEnd:e.spaces.space12},ssoButtonStyles:{marginBottom:e.spaces.space12},buttonStyles:{width:g.fI,height:e.spaces.space40},narrowButtonStyles:{width:g.ND},moduleContent:{paddingStart:e.spaces.space12,paddingEnd:e.spaces.space12},footerLabel:{marginBottom:e.spaces.space16}}))),Z=({onSignupClick:e})=>{const{featureSwitches:t}=s.useContext(d.rC),n=t.isTrue("responsive_web_third_party_sso_buttons_enabled"),o=(0,b.BG)(t),{signUpLabel:p}=(0,b.M5)(t);return s.createElement(i.Z,{accessibilityLabel:y,accessibilityRole:"summary"},s.createElement(a.ZP,{text:w}),s.createElement(r.ZP,{color:"gray700",size:"subtext2",style:f.moduleContent},S),s.createElement(l.Z,null,(({containerWidth:t})=>{const a=_.Z.isTwoColumnSmallLayout(t);return s.createElement(i.Z,{style:f.buttonContainer},n?s.createElement(s.Fragment,null,s.createElement(m.Z,{buttonSize:"medium",buttonState:o,customWidth:a?g.ND:void 0,displayType:g.qv.Button,style:[f.ssoButtonStyles,f.buttonStyles,a&&f.narrowButtonStyles]}),s.createElement(h.Z,{buttonSize:"medium",buttonState:o,style:[f.ssoButtonStyles,f.buttonStyles,a&&f.narrowButtonStyles]}),s.createElement(c.ZP,{accessibilityRole:"link",backgroundColor:"white",borderColor:"gray200",color:"alwaysBaseGray1100",link:{pathname:"/i/flow/signup",state:{input:{requested_variant:JSON.stringify({signup_type:b.mk})}}},onPress:e,size:"medium",style:[f.buttonStyles,a&&f.narrowButtonStyles]},p)):s.createElement(c.ZP,{accessibilityRole:"link",link:"/i/flow/signup",onPress:e,size:"medium",type:"brandFilled"},y))})),n?s.createElement(r.ZP,{color:"gray700",size:"subtext2",style:[f.moduleContent,f.footerLabel]},b.K2):null)};var C=n(60673);class E extends s.Component{constructor(...e){super(...e),this._handleSignupClick=()=>{const{analytics:e}=this.props;e.scribeAction("signup")}}render(){return s.createElement(Z,{onSignupClick:this._handleSignupClick})}}const k=(0,C.Z)(E,{component:"signup_module"})},68591:(e,t,n)=>{n.d(t,{Tu:()=>d,ZP:()=>m});var s=n(2784),i=n(25686),o=n(3655),a=n(36934),r=n(79866),l=n(11839),c=n(73186),p=n(80166);const u=c.Z.create((e=>({icon:{color:e.colors.primary,height:e.fontSizes.title4,paddingEnd:e.spaces.space12,width:e.fontSizes.title4}}))),d=Object.freeze({TopicFilled:"TOPIC_FILLED"});const h=c.Z.create((e=>({root:{justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},mainContent:{flexDirection:"row"},subtext:{alignSelf:"flex-start"},withSubtext:{alignSelf:"center"},icon:{alignSelf:"flex-start",height:e.spaces.space20,justifyContent:"center"},iconArrow:{color:e.colors.text},rightControlGroup:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1,alignSelf:"center"}}))),m=function({icon:e,landingUrl:t,nativeID:n,rightControl:m,style:g,subtext:_,testID:b,text:y}){const w=(e=>e===d.TopicFilled?s.createElement(p.Z,{style:u.icon}):null)(e),S=_?null:h.withSubtext,f=r.Z.generate({backgroundColor:c.Z.theme.colors.gray0,color:c.Z.theme.colors.cellBackground,customFocusBackgroundColor:c.Z.theme.colors.gray0,customHoverBackgroundColor:c.Z.theme.colors.gray0,customPressedBackgroundColor:c.Z.theme.colors.gray0});return s.createElement(l.Z,{interactiveStyles:t?f:null,link:null==t?void 0:t.url,nativeID:n,style:[h.root,g],testID:b},s.createElement(i.Z,{accessibilityLevel:2,accessibilityRole:"heading",style:h.mainContent},s.createElement(i.Z,{style:h.icon},w),s.createElement(a.ZP,{numberOfLines:3,size:"headline1",style:S,weight:"heavy",withHashflags:!0},y),s.createElement(i.Z,{style:h.rightControlGroup},t?s.createElement(i.Z,{style:S},s.createElement(o.Z,{style:h.iconArrow})):null,m?s.createElement(i.Z,null,m):null)),_?s.createElement(a.ZP,{color:"gray700",numberOfLines:2,size:"subtext2",style:h.subtext,withHashflags:!0},_):null)}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.SignupModule.5f801bd9.js.map